{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agentic-trading.com/schemas/decisions/meta/v1",
  "title": "Meta Decision Event",
  "description": "Coordinated decision from meta-agent after consensus voting",
  "type": "object",
  "required": [
    "symbol",
    "action",
    "quantity",
    "confidence",
    "participating_agents",
    "consensus_method",
    "timestamp",
    "correlation_id",
    "source"
  ],
  "properties": {
    "symbol": {
      "type": "string",
      "description": "Trading symbol",
      "examples": ["AAPL", "MSFT", "GOOGL"]
    },
    "action": {
      "type": "string",
      "enum": ["BUY", "SELL", "HOLD"],
      "description": "Coordinated trading action"
    },
    "quantity": {
      "type": "number",
      "minimum": 0,
      "description": "Coordinated quantity to trade"
    },
    "confidence": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Meta-agent confidence in coordinated decision"
    },
    "participating_agents": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "description": "List of agent IDs that participated in the decision"
    },
    "consensus_method": {
      "type": "string",
      "enum": ["majority", "weighted", "unanimous", "confidence_weighted"],
      "description": "Method used to reach consensus"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of meta decision"
    },
    "correlation_id": {
      "type": "string",
      "description": "Correlation ID linking to original signal"
    },
    "source": {
      "type": "string",
      "const": "meta-agent",
      "description": "Source identifier"
    },
    "override_applied": {
      "type": "string",
      "enum": ["emergency_stop", "symbol_paused", "position_limit"],
      "description": "Risk override that was applied, if any"
    },
    "metadata": {
      "type": "object",
      "description": "Additional metadata",
      "properties": {
        "voting_details": {
          "type": "object",
          "description": "Details about the voting process"
        },
        "risk_assessment": {
          "type": "object",
          "description": "Risk assessment data"
        }
      }
    }
  }
}
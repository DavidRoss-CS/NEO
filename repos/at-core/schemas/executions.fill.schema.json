{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.trading.example.com/executions.fill.v1.json",
  "title": "Execution Fill",
  "description": "Record of order execution (actual or simulated fill).",
  "version": "1.0.0",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "corr_id",
    "order_id",
    "fill_id",
    "timestamp",
    "instrument",
    "side",
    "fill_quantity",
    "fill_price",
    "fill_status",
    "execution_venue"
  ],
  "properties": {
    "corr_id": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "minLength": 1,
      "maxLength": 128,
      "description": "Correlation ID from original order intent."
    },
    "order_id": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "minLength": 1,
      "maxLength": 128,
      "description": "Unique identifier for this order."
    },
    "fill_id": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "minLength": 1,
      "maxLength": 128,
      "description": "Unique identifier for this fill execution."
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when fill occurred."
    },
    "instrument": {
      "type": "string",
      "pattern": "^[A-Z0-9]+([/_-]?[A-Z0-9]+)?$",
      "minLength": 3,
      "maxLength": 20,
      "description": "Trading instrument identifier."
    },
    "side": {
      "type": "string",
      "enum": ["buy", "sell"],
      "description": "Direction of the executed trade."
    },
    "fill_quantity": {
      "type": "number",
      "exclusiveMinimum": 0,
      "description": "Actual quantity filled."
    },
    "fill_price": {
      "type": "number",
      "exclusiveMinimum": 0,
      "description": "Actual price of execution."
    },
    "fill_status": {
      "type": "string",
      "enum": ["full", "partial", "rejected", "cancelled"],
      "description": "Status of the order fill."
    },
    "execution_venue": {
      "type": "string",
      "enum": ["simulation", "paper", "live", "backtest"],
      "description": "Where the execution took place."
    },
    "strategy_id": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "description": "Strategy that originated this order."
    },
    "agent_id": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "description": "Agent that generated the original decision."
    },
    "commission": {
      "type": "number",
      "minimum": 0,
      "description": "Commission/fees charged for execution."
    },
    "slippage": {
      "type": "number",
      "description": "Price slippage from intended price (can be negative)."
    },
    "market_data": {
      "type": "object",
      "properties": {
        "bid": {
          "type": "number",
          "exclusiveMinimum": 0
        },
        "ask": {
          "type": "number",
          "exclusiveMinimum": 0
        },
        "mid": {
          "type": "number",
          "exclusiveMinimum": 0
        },
        "volume": {
          "type": "number",
          "minimum": 0
        }
      },
      "description": "Market data at time of execution."
    },
    "execution_latency_ms": {
      "type": "integer",
      "minimum": 0,
      "description": "Latency from decision to execution in milliseconds."
    },
    "reject_reason": {
      "type": "string",
      "maxLength": 200,
      "description": "Reason for rejection (if fill_status is rejected)."
    },
    "metadata": {
      "type": "object",
      "description": "Additional execution-specific data.",
      "additionalProperties": true
    }
  },
  "examples": [
    {
      "corr_id": "req_abc123",
      "order_id": "ord_def456",
      "fill_id": "fill_ghi789",
      "timestamp": "2024-01-15T10:31:05.456Z",
      "instrument": "EURUSD",
      "side": "buy",
      "fill_quantity": 10000,
      "fill_price": 1.08950,
      "fill_status": "full",
      "execution_venue": "simulation",
      "strategy_id": "momentum_breakout_v1",
      "agent_id": "agent_prod_001",
      "commission": 0.50,
      "slippage": -0.0002,
      "market_data": {
        "bid": 1.08945,
        "ask": 1.08955,
        "mid": 1.08950,
        "volume": 1500000
      },
      "execution_latency_ms": 125
    }
  ]
}